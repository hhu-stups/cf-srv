<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<org.eventb.core.machineFile org.eventb.core.configuration="org.eventb.core.fwd" org.eventb.core.generated="false" org.eventb.texttools.text_lastmodified="1767912424786" org.eventb.texttools.text_representation="machine M4_Quadcopter_Movement refines M3_Quadcopter_Battery  sees M4_Quadcopter_Movement_Ctx&#10;&#10;variables mode sensor_data_actual position_actual battery battery_actual current_position visited field emergency_mode&#10;&#10;invariants&#10;  @current_pos_not_outside_grid emergency_mode = FALSE ⇒ current_position ∈ (1‥ WIDTH) × (1‥DEPTH)&#10;  @inv_field field ∈ (1‥WIDTH) × (1‥DEPTH) → 0‥2&#10;  @inv_visited visited ⊆  (1‥WIDTH) × (1‥ DEPTH)&#10;  @emergency_mode emergency_mode ∈ BOOL&#10;  @inv_current_pos_in_visited current_position ∈ (1‥ WIDTH) × (1‥DEPTH) ⇒ current_position ∈ visited&#10;&#10;events&#10;  event INITIALISATION extends INITIALISATION&#10;    then&#10;      @init_current_pos current_position ≔ BASE_POSITION&#10;      @init_visited visited ≔ {BASE_POSITION}&#10;      @init_Field field ≔ ((1‥WIDTH) × (1‥DEPTH) × {0})  {BASE_POSITION ↦ 1}&#10;      @init_emergency_mode emergency_mode ≔ FALSE&#10;  end&#10;&#10;  event TAKEOFF extends TAKEOFF&#10;  when&#10;  &#9;@grd_emergency_mode emergency_mode = FALSE&#10;  end&#10;&#10;  event MOVE_RIGHT refines MOVE&#10;    where&#10;      @grd_mode mode = FLYING&#10;      @grd_sensor_data_actual sensor_data_actual = TRUE&#10;      @grd_position position_actual = TRUE&#10;      @grd_battery battery &gt; BATTERY_STEP&#10;      @grd_battery_actual battery_actual = TRUE&#10;      @grd_emergency_mode emergency_mode = FALSE&#10;      @grd_does_not_move_outside prj1(current_position) − 1 ≥ 1&#10;      @grd_does_not_collide field(prj1(current_position) − 1 ↦ prj2(current_position)) ≠ 2&#10;    then&#10;      @act_sensor_data_actual sensor_data_actual ≔ FALSE&#10;      @act_update_position position_actual ≔ FALSE&#10;      @act_battery_actual battery_actual ≔ FALSE&#10;      @act_battery battery ≔ battery − BATTERY_STEP&#10;      @act_movement current_position ≔ prj1(current_position) − 1 ↦ prj2(current_position)&#10;      @act_visited visited ≔ visited ∪ {prj1(current_position) − 1 ↦ prj2(current_position)}&#10;  end&#10;&#10;  event MOVE_LEFT refines MOVE&#10;    where&#10;      @grd_mode mode = FLYING&#10;      @grd_sensor_data_actual sensor_data_actual = TRUE&#10;      @grd_position position_actual = TRUE&#10;      @grd_battery battery &gt; BATTERY_STEP&#10;      @grd_battery_actual battery_actual = TRUE&#10;      @grd_emergency_mode emergency_mode = FALSE&#10;      @grd_does_not_move_outside prj1(current_position) + 1 ≤ WIDTH&#10;      @grd_does_not_collide field(prj1(current_position) + 1 ↦ prj2(current_position)) ≠ 2&#10;    then&#10;      @act_sensor_data_actual sensor_data_actual ≔ FALSE&#10;      @act_update_position position_actual ≔ FALSE&#10;      @act_battery_actual battery_actual ≔ FALSE&#10;      @act_battery battery ≔ battery − BATTERY_STEP&#10;      @act_movement current_position ≔ prj1(current_position) + 1 ↦ prj2(current_position)&#10;      @act_visited visited ≔ visited ∪ {prj1(current_position) + 1 ↦ prj2(current_position)}&#10;  end&#10;&#10;  event MOVE_BACKWARD refines MOVE&#10;    where&#10;      @grd_mode mode = FLYING&#10;      @grd_sensor_data_actual sensor_data_actual = TRUE&#10;      @grd_position position_actual = TRUE&#10;      @grd_battery battery &gt; BATTERY_STEP&#10;      @grd_battery_actual battery_actual = TRUE&#10;      @grd_emergency_mode emergency_mode = FALSE&#10;      @grd_does_not_move_outside prj2(current_position) − 1 ≥ 1&#10;      @grd_does_not_collide field(prj1(current_position) ↦ prj2(current_position) − 1) ≠ 2&#10;    then&#10;      @act_sensor_data_actual sensor_data_actual ≔ FALSE&#10;      @act_update_position position_actual ≔ FALSE&#10;      @act_battery_actual battery_actual ≔ FALSE&#10;      @act_battery battery ≔ battery − BATTERY_STEP&#10;      @act_movement current_position ≔ prj1(current_position) ↦ prj2(current_position) − 1&#10;      @act_visited visited ≔ visited ∪ {prj1(current_position) ↦ prj2(current_position) − 1}&#10;  end&#10;&#10;  event MOVE_FORWARD refines MOVE&#10;    where&#10;      @grd_mode mode = FLYING&#10;      @grd_sensor_data_actual sensor_data_actual = TRUE&#10;      @grd_position position_actual = TRUE&#10;      @grd_battery battery &gt; BATTERY_STEP&#10;      @grd_battery_actual battery_actual = TRUE&#10;      @grd_emergency_mode emergency_mode = FALSE&#10;      @grd_does_not_move_outside prj2(current_position) + 1 ≤ DEPTH&#10;      @grd_does_not_collide field(prj1(current_position) ↦ prj2(current_position) + 1) ≠ 2&#10;    then&#10;      @act_sensor_data_actual sensor_data_actual ≔ FALSE&#10;      @act_update_position position_actual ≔ FALSE&#10;      @act_battery_actual battery_actual ≔ FALSE&#10;      @act_battery battery ≔ battery − BATTERY_STEP&#10;      @act_movement current_position ≔ prj1(current_position) ↦ prj2(current_position) + 1&#10;      @act_visited visited ≔ visited ∪ {prj1(current_position) ↦ prj2(current_position) + 1}&#10;  end&#10;&#10;  event LAND extends LAND&#10;  end&#10;&#10;  event OBSERVE extends OBSERVE&#10;    any left_sensor right_sensor forward_sensor backward_sensor&#10;    where&#10;      @grd_left left_sensor ∈ {0,1,2}&#10;      @grd_right right_sensor ∈ {0,1,2}&#10;      @grd_forward forward_sensor ∈ {0,1,2}&#10;      @grd_backward backward_sensor ∈ {0,1,2}&#10;      @grd_emergency emergency_mode = FALSE&#10;    then&#10;      @act_field field ≔ field  ({x,y,val · x = prj1(current_position) ∧ y = prj2(current_position) ∧ x ∈ 1‥ WIDTH ∧ y ∈ 1‥ DEPTH ∧ (right_sensor = 0 ∨ left_sensor = 0 ∨ forward_sensor = 0 ∨ backward_sensor = 0) ∧ val = 2 ∣ x ↦ y ↦ val} ∪&#10;                 {x,y,val · x = prj1(current_position) ∧ y = prj2(current_position) ∧ x ∈ 1‥ WIDTH ∧ y ∈ 1‥ DEPTH ∧ ¬(right_sensor = 0 ∨ left_sensor = 0 ∨ forward_sensor = 0 ∨ backward_sensor = 0) ∧ val = 1 ∣ x ↦ y ↦ val} ∪&#10;                 {x,y,val · x = prj1(current_position) − 1 ∧ y = prj2(current_position) ∧ x ∈ 1‥ WIDTH ∧ y ∈ 1‥ DEPTH ∧ right_sensor ∈ {1,2} ∧ val = right_sensor ∣ x ↦ y ↦ val} ∪&#10;                 {x,y,val · x = prj1(current_position) + 1 ∧ y = prj2(current_position) ∧ x ∈ 1‥ WIDTH ∧ y ∈ 1‥ DEPTH ∧ left_sensor ∈ {1,2} ∧ val= left_sensor ∣ x ↦ y ↦ val} ∪&#10;                 {x,y,val · x = prj1(current_position) ∧ y = prj2(current_position) + 1 ∧ x ∈ 1‥ WIDTH ∧ y ∈ 1‥ DEPTH ∧ forward_sensor ∈ {1,2} ∧ val = forward_sensor ∣ x ↦ y ↦ val} ∪&#10;                 {x,y,val · x = prj1(current_position) ∧ y = prj2(current_position) − 1 ∧ x ∈ 1‥ WIDTH ∧ y ∈ 1‥ DEPTH ∧ backward_sensor ∈ {1,2} ∧ val = backward_sensor ∣ x ↦ y ↦ val})&#10;  end&#10;&#10;  event SYNCHRONIZE_BATTERY extends SYNCHRONIZE_BATTERY&#10;  when&#10;  &#9;@grd_emergency_mode emergency_mode = FALSE&#10;  end&#10;&#10;  event UPDATE_POSITION extends UPDATE_POSITION&#10;    any x y&#10;    where&#10;      @grd_x x ∈ ℤ&#10;      @grd_y y ∈ ℤ&#10;      @grd_emergency_mode emergency_mode = FALSE&#10;    then&#10;      @act_pos current_position ≔ x ↦ y&#10;      @act_visited visited ≔ {TRUE ↦ visited ∪ {x ↦ y}, FALSE ↦ visited}(bool(x ↦ y ∈ (1‥ WIDTH) × (1‥DEPTH)))&#10;      @act_emergency_mode emergency_mode ≔ bool(x ↦ y ∉ (1‥ WIDTH) × (1‥DEPTH))&#10;  end&#10;end&#10;" version="5">
    <org.eventb.core.refinesMachine name="'" org.eventb.core.target="M3_Quadcopter_Battery"/>
    <org.eventb.core.seesContext name="_dRj8UOAHEfC8NKsWk45csw" org.eventb.core.target="M4_Quadcopter_Movement_Ctx"/>
    <org.eventb.core.variable name="_B2viwOADEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.identifier="mode"/>
    <org.eventb.core.variable name="_gkpagOADEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.identifier="sensor_data_actual"/>
    <org.eventb.core.variable name="_gBOiEOF8EfCu9c2s4XMQ6Q" org.eventb.core.generated="false" org.eventb.core.identifier="position_actual"/>
    <org.eventb.core.variable name="_HZui0OAGEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.identifier="battery"/>
    <org.eventb.core.event name="_gkpagOADEfC8NKsWk45csx" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="INITIALISATION">
        <org.eventb.core.action name="_kKF6YOAHEfC8NKsWk45csw" org.eventb.core.assignment="current_position ≔ BASE_POSITION" org.eventb.core.generated="false" org.eventb.core.label="init_current_pos"/>
        <org.eventb.core.action name="_kKF6YeAHEfC8NKsWk45csw" org.eventb.core.assignment="visited ≔ {BASE_POSITION}" org.eventb.core.generated="false" org.eventb.core.label="init_visited"/>
        <org.eventb.core.action name="_mb9PUOAHEfC8NKsWk45csw" org.eventb.core.assignment="field ≔ ((1‥WIDTH) × (1‥DEPTH) × {0})  {BASE_POSITION ↦ 1}" org.eventb.core.generated="false" org.eventb.core.label="init_Field"/>
        <org.eventb.core.action name="_vONfEOF7EfCu9c2s4XMQ6Q" org.eventb.core.assignment="emergency_mode ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="init_emergency_mode"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_gkpagOADEfC8NKsWk45csy" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="TAKEOFF">
        <org.eventb.core.refinesEvent name="'" org.eventb.core.target="TAKEOFF"/>
        <org.eventb.core.guard name="_OZkSYOF9EfCu9c2s4XMQ6Q" org.eventb.core.generated="false" org.eventb.core.label="grd_emergency_mode" org.eventb.core.predicate="emergency_mode = FALSE"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_1F2GUOAGEfC8NKsWk45csw" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="MOVE_RIGHT">
        <org.eventb.core.refinesEvent name="_1F2GUeAGEfC8NKsWk45csw" org.eventb.core.target="MOVE"/>
        <org.eventb.core.guard name="_NimF4uADEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_mode" org.eventb.core.predicate="mode = FLYING"/>
        <org.eventb.core.guard name="_oZdaoOADEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_sensor_data_actual" org.eventb.core.predicate="sensor_data_actual = TRUE"/>
        <org.eventb.core.guard name="_v6Vv0OF8EfCu9c2s4XMQ6Q" org.eventb.core.generated="false" org.eventb.core.label="grd_position" org.eventb.core.predicate="position_actual = TRUE"/>
        <org.eventb.core.guard name="_PE7T8OAGEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_battery" org.eventb.core.predicate="battery &gt; BATTERY_STEP"/>
        <org.eventb.core.guard name="_hjvWQOJDEfCN5cCo6lgIJA" org.eventb.core.generated="false" org.eventb.core.label="grd_battery_actual" org.eventb.core.predicate="battery_actual = TRUE"/>
        <org.eventb.core.guard name="_OZmuoOF9EfCu9c2s4XMQ6Q" org.eventb.core.generated="false" org.eventb.core.label="grd_emergency_mode" org.eventb.core.predicate="emergency_mode = FALSE"/>
        <org.eventb.core.guard name="_yIbdgOAHEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_does_not_move_outside" org.eventb.core.predicate="prj1(current_position) − 1 ≥ 1"/>
        <org.eventb.core.guard name="_BkLZ0OAIEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_does_not_collide" org.eventb.core.predicate="field(prj1(current_position) − 1 ↦ prj2(current_position)) ≠ 2"/>
        <org.eventb.core.action name="_jC-eIOADEfC8NKsWk45csw" org.eventb.core.assignment="sensor_data_actual ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act_sensor_data_actual"/>
        <org.eventb.core.action name="_0A4HYOF8EfCu9c2s4XMQ6Q" org.eventb.core.assignment="position_actual ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act_update_position"/>
        <org.eventb.core.action name="_m5FDQOJDEfCN5cCo6lgIJA" org.eventb.core.assignment="battery_actual ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act_battery_actual"/>
        <org.eventb.core.action name="_w3EV8OK9EfCrzPBtTK8cxw" org.eventb.core.assignment="battery ≔ battery − BATTERY_STEP" org.eventb.core.generated="false" org.eventb.core.label="act_battery"/>
        <org.eventb.core.action name="_x2OdwOAIEfC8NKsWk45csw" org.eventb.core.assignment="current_position ≔ prj1(current_position) − 1 ↦ prj2(current_position)" org.eventb.core.generated="false" org.eventb.core.label="act_movement"/>
        <org.eventb.core.action name="_BVMGIOAJEfC8NKsWk45csw" org.eventb.core.assignment="visited ≔ visited ∪ {prj1(current_position) − 1 ↦ prj2(current_position)}" org.eventb.core.generated="false" org.eventb.core.label="act_visited"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_yr4k0OsIEfCthOk2wWjR-w" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="MOVE_LEFT">
        <org.eventb.core.refinesEvent name="_yr5L4OsIEfCthOk2wWjR-w" org.eventb.core.target="MOVE"/>
        <org.eventb.core.guard name="_1F2GUuAGEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_mode" org.eventb.core.predicate="mode = FLYING"/>
        <org.eventb.core.guard name="_1F2GU-AGEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_sensor_data_actual" org.eventb.core.predicate="sensor_data_actual = TRUE"/>
        <org.eventb.core.guard name="_v6W98OF8EfCu9c2s4XMQ6Q" org.eventb.core.generated="false" org.eventb.core.label="grd_position" org.eventb.core.predicate="position_actual = TRUE"/>
        <org.eventb.core.guard name="_1F2GVOAGEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_battery" org.eventb.core.predicate="battery &gt; BATTERY_STEP"/>
        <org.eventb.core.guard name="_hj010OJDEfCN5cCo6lgIJA" org.eventb.core.generated="false" org.eventb.core.label="grd_battery_actual" org.eventb.core.predicate="battery_actual = TRUE"/>
        <org.eventb.core.guard name="_OZnVsOF9EfCu9c2s4XMQ6Q" org.eventb.core.generated="false" org.eventb.core.label="grd_emergency_mode" org.eventb.core.predicate="emergency_mode = FALSE"/>
        <org.eventb.core.guard name="_0-XI0OAHEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_does_not_move_outside" org.eventb.core.predicate="prj1(current_position) + 1 ≤ WIDTH"/>
        <org.eventb.core.guard name="_D1bqwOAIEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_does_not_collide" org.eventb.core.predicate="field(prj1(current_position) + 1 ↦ prj2(current_position)) ≠ 2"/>
        <org.eventb.core.action name="_1F2GVeAGEfC8NKsWk45csw" org.eventb.core.assignment="sensor_data_actual ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act_sensor_data_actual"/>
        <org.eventb.core.action name="_0A5VgOF8EfCu9c2s4XMQ6Q" org.eventb.core.assignment="position_actual ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act_update_position"/>
        <org.eventb.core.action name="_m5GRYOJDEfCN5cCo6lgIJA" org.eventb.core.assignment="battery_actual ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act_battery_actual"/>
        <org.eventb.core.action name="_w3GLIOK9EfCrzPBtTK8cxw" org.eventb.core.assignment="battery ≔ battery − BATTERY_STEP" org.eventb.core.generated="false" org.eventb.core.label="act_battery"/>
        <org.eventb.core.action name="_01kjwOAIEfC8NKsWk45csw" org.eventb.core.assignment="current_position ≔ prj1(current_position) + 1 ↦ prj2(current_position)" org.eventb.core.generated="false" org.eventb.core.label="act_movement"/>
        <org.eventb.core.action name="_Du8y0OAJEfC8NKsWk45csw" org.eventb.core.assignment="visited ≔ visited ∪ {prj1(current_position) + 1 ↦ prj2(current_position)}" org.eventb.core.generated="false" org.eventb.core.label="act_visited"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_3JDTsOsIEfCthOk2wWjR-w" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="MOVE_BACKWARD">
        <org.eventb.core.refinesEvent name="_3JEh0OsIEfCthOk2wWjR-w" org.eventb.core.target="MOVE"/>
        <org.eventb.core.guard name="_1F2tYuAGEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_mode" org.eventb.core.predicate="mode = FLYING"/>
        <org.eventb.core.guard name="_1F2tY-AGEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_sensor_data_actual" org.eventb.core.predicate="sensor_data_actual = TRUE"/>
        <org.eventb.core.guard name="_v6XlAOF8EfCu9c2s4XMQ6Q" org.eventb.core.generated="false" org.eventb.core.label="grd_position" org.eventb.core.predicate="position_actual = TRUE"/>
        <org.eventb.core.guard name="_1F2tZOAGEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_battery" org.eventb.core.predicate="battery &gt; BATTERY_STEP"/>
        <org.eventb.core.guard name="_hj2rAOJDEfCN5cCo6lgIJA" org.eventb.core.generated="false" org.eventb.core.label="grd_battery_actual" org.eventb.core.predicate="battery_actual = TRUE"/>
        <org.eventb.core.guard name="_OZoj0OF9EfCu9c2s4XMQ6Q" org.eventb.core.generated="false" org.eventb.core.label="grd_emergency_mode" org.eventb.core.predicate="emergency_mode = FALSE"/>
        <org.eventb.core.guard name="_3l6Z4OAHEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_does_not_move_outside" org.eventb.core.predicate="prj2(current_position) − 1 ≥ 1"/>
        <org.eventb.core.guard name="_GY2CsOAIEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_does_not_collide" org.eventb.core.predicate="field(prj1(current_position) ↦ prj2(current_position) − 1) ≠ 2"/>
        <org.eventb.core.action name="_1F2tZeAGEfC8NKsWk45csw" org.eventb.core.assignment="sensor_data_actual ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act_sensor_data_actual"/>
        <org.eventb.core.action name="_0A58kOF8EfCu9c2s4XMQ6Q" org.eventb.core.assignment="position_actual ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act_update_position"/>
        <org.eventb.core.action name="_m5HfgOJDEfCN5cCo6lgIJA" org.eventb.core.assignment="battery_actual ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act_battery_actual"/>
        <org.eventb.core.action name="_w3GyMOK9EfCrzPBtTK8cxw" org.eventb.core.assignment="battery ≔ battery − BATTERY_STEP" org.eventb.core.generated="false" org.eventb.core.label="act_battery"/>
        <org.eventb.core.action name="_3-ZV4OAIEfC8NKsWk45csw" org.eventb.core.assignment="current_position ≔ prj1(current_position) ↦ prj2(current_position) − 1" org.eventb.core.generated="false" org.eventb.core.label="act_movement"/>
        <org.eventb.core.action name="_HILYcOAJEfC8NKsWk45csw" org.eventb.core.assignment="visited ≔ visited ∪ {prj1(current_position) ↦ prj2(current_position) − 1}" org.eventb.core.generated="false" org.eventb.core.label="act_visited"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_2VjaMOsIEfCthOk2wWjR-w" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="MOVE_FORWARD">
        <org.eventb.core.refinesEvent name="_2VkBQOsIEfCthOk2wWjR-w" org.eventb.core.target="MOVE"/>
        <org.eventb.core.guard name="_1F3UcOAGEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_mode" org.eventb.core.predicate="mode = FLYING"/>
        <org.eventb.core.guard name="_1F37gOAGEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_sensor_data_actual" org.eventb.core.predicate="sensor_data_actual = TRUE"/>
        <org.eventb.core.guard name="_v6YMEOF8EfCu9c2s4XMQ6Q" org.eventb.core.generated="false" org.eventb.core.label="grd_position" org.eventb.core.predicate="position_actual = TRUE"/>
        <org.eventb.core.guard name="_1F37geAGEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_battery" org.eventb.core.predicate="battery &gt; BATTERY_STEP"/>
        <org.eventb.core.guard name="_hj4gMOJDEfCN5cCo6lgIJA" org.eventb.core.generated="false" org.eventb.core.label="grd_battery_actual" org.eventb.core.predicate="battery_actual = TRUE"/>
        <org.eventb.core.guard name="_OZpK4OF9EfCu9c2s4XMQ6Q" org.eventb.core.generated="false" org.eventb.core.label="grd_emergency_mode" org.eventb.core.predicate="emergency_mode = FALSE"/>
        <org.eventb.core.guard name="_5zvjYOAHEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_does_not_move_outside" org.eventb.core.predicate="prj2(current_position) + 1 ≤ DEPTH"/>
        <org.eventb.core.guard name="_JCTYQOAIEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_does_not_collide" org.eventb.core.predicate="field(prj1(current_position) ↦ prj2(current_position) + 1) ≠ 2"/>
        <org.eventb.core.action name="_1F37guAGEfC8NKsWk45csw" org.eventb.core.assignment="sensor_data_actual ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act_sensor_data_actual"/>
        <org.eventb.core.action name="_0A6joOF8EfCu9c2s4XMQ6Q" org.eventb.core.assignment="position_actual ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act_update_position"/>
        <org.eventb.core.action name="_m5JUsOJDEfCN5cCo6lgIJA" org.eventb.core.assignment="battery_actual ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act_battery_actual"/>
        <org.eventb.core.action name="_w3InYOK9EfCrzPBtTK8cxw" org.eventb.core.assignment="battery ≔ battery − BATTERY_STEP" org.eventb.core.generated="false" org.eventb.core.label="act_battery"/>
        <org.eventb.core.action name="_3-Z88OAIEfC8NKsWk45csw" org.eventb.core.assignment="current_position ≔ prj1(current_position) ↦ prj2(current_position) + 1" org.eventb.core.generated="false" org.eventb.core.label="act_movement"/>
        <org.eventb.core.action name="_JJqvEOAJEfC8NKsWk45csw" org.eventb.core.assignment="visited ≔ visited ∪ {prj1(current_position) ↦ prj2(current_position) + 1}" org.eventb.core.generated="false" org.eventb.core.label="act_visited"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_gkpagOADEfC8NKsWk45cs{" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="LAND">
        <org.eventb.core.refinesEvent name="'" org.eventb.core.target="LAND"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_gkpagOADEfC8NKsWk45cs|" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="OBSERVE">
        <org.eventb.core.refinesEvent name="'" org.eventb.core.target="OBSERVE"/>
        <org.eventb.core.parameter name="_ci_7QOAJEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.identifier="left_sensor"/>
        <org.eventb.core.parameter name="_ci_7QeAJEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.identifier="right_sensor"/>
        <org.eventb.core.parameter name="_ci_7QuAJEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.identifier="forward_sensor"/>
        <org.eventb.core.parameter name="_ci_7Q-AJEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.identifier="backward_sensor"/>
        <org.eventb.core.guard name="_ci_7ROAJEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_left" org.eventb.core.predicate="left_sensor ∈ {0,1,2}"/>
        <org.eventb.core.guard name="_ci_7ReAJEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_right" org.eventb.core.predicate="right_sensor ∈ {0,1,2}"/>
        <org.eventb.core.guard name="_cjAiUOAJEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_forward" org.eventb.core.predicate="forward_sensor ∈ {0,1,2}"/>
        <org.eventb.core.guard name="_cjAiUeAJEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="grd_backward" org.eventb.core.predicate="backward_sensor ∈ {0,1,2}"/>
        <org.eventb.core.action name="_cjAiUuAJEfC8NKsWk45csw" org.eventb.core.assignment="field ≔ field  ({x,y,val · x = prj1(current_position) ∧ y = prj2(current_position) ∧ x ∈ 1‥ WIDTH ∧ y ∈ 1‥ DEPTH ∧ (right_sensor = 0 ∨ left_sensor = 0 ∨ forward_sensor = 0 ∨ backward_sensor = 0) ∧ val = 2 ∣ x ↦ y ↦ val} ∪&#10;                 {x,y,val · x = prj1(current_position) ∧ y = prj2(current_position) ∧ x ∈ 1‥ WIDTH ∧ y ∈ 1‥ DEPTH ∧ ¬(right_sensor = 0 ∨ left_sensor = 0 ∨ forward_sensor = 0 ∨ backward_sensor = 0) ∧ val = 1 ∣ x ↦ y ↦ val} ∪&#10;                 {x,y,val · x = prj1(current_position) − 1 ∧ y = prj2(current_position) ∧ x ∈ 1‥ WIDTH ∧ y ∈ 1‥ DEPTH ∧ right_sensor ∈ {1,2} ∧ val = right_sensor ∣ x ↦ y ↦ val} ∪&#10;                 {x,y,val · x = prj1(current_position) + 1 ∧ y = prj2(current_position) ∧ x ∈ 1‥ WIDTH ∧ y ∈ 1‥ DEPTH ∧ left_sensor ∈ {1,2} ∧ val= left_sensor ∣ x ↦ y ↦ val} ∪&#10;                 {x,y,val · x = prj1(current_position) ∧ y = prj2(current_position) + 1 ∧ x ∈ 1‥ WIDTH ∧ y ∈ 1‥ DEPTH ∧ forward_sensor ∈ {1,2} ∧ val = forward_sensor ∣ x ↦ y ↦ val} ∪&#10;                 {x,y,val · x = prj1(current_position) ∧ y = prj2(current_position) − 1 ∧ x ∈ 1‥ WIDTH ∧ y ∈ 1‥ DEPTH ∧ backward_sensor ∈ {1,2} ∧ val = backward_sensor ∣ x ↦ y ↦ val})" org.eventb.core.generated="false" org.eventb.core.label="act_field"/>
        <org.eventb.core.guard name="_4_qcUOHOEfC0NdyoK1GV1g" org.eventb.core.generated="false" org.eventb.core.label="grd_emergency" org.eventb.core.predicate="emergency_mode = FALSE"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_gkpagOADEfC8NKsWk45cs}" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="SYNCHRONIZE_BATTERY">
        <org.eventb.core.refinesEvent name="'" org.eventb.core.target="SYNCHRONIZE_BATTERY"/>
        <org.eventb.core.guard name="_wuC8sOHUEfC0NdyoK1GV1g" org.eventb.core.generated="false" org.eventb.core.label="grd_emergency_mode" org.eventb.core.predicate="emergency_mode = FALSE"/>
    </org.eventb.core.event>
    <org.eventb.core.variable name="_NhK_0OJDEfCN5cCo6lgIJA" org.eventb.core.generated="false" org.eventb.core.identifier="battery_actual"/>
    <org.eventb.core.variable name="_PnAQ0OAHEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.identifier="current_position"/>
    <org.eventb.core.variable name="_PnAQ0eAHEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.identifier="visited"/>
    <org.eventb.core.variable name="_PnAQ0uAHEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.identifier="field"/>
    <org.eventb.core.invariant name="_dRm_oOAHEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="current_pos_not_outside_grid" org.eventb.core.predicate="emergency_mode = FALSE ⇒ current_position ∈ (1‥ WIDTH) × (1‥DEPTH)"/>
    <org.eventb.core.invariant name="_PnAQ0-AHEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="inv_field" org.eventb.core.predicate="field ∈ (1‥WIDTH) × (1‥DEPTH) → 0‥2"/>
    <org.eventb.core.invariant name="_gbUikOAHEfC8NKsWk45csw" org.eventb.core.generated="false" org.eventb.core.label="inv_visited" org.eventb.core.predicate="visited ⊆  (1‥WIDTH) × (1‥ DEPTH)"/>
    <org.eventb.core.variable name="_vOnuwOF7EfCu9c2s4XMQ6Q" org.eventb.core.generated="false" org.eventb.core.identifier="emergency_mode"/>
    <org.eventb.core.invariant name="_vOo84OF7EfCu9c2s4XMQ6Q" org.eventb.core.generated="false" org.eventb.core.label="emergency_mode" org.eventb.core.predicate="emergency_mode ∈ BOOL"/>
    <org.eventb.core.event name="_vOpj8OF7EfCu9c2s4XMQ6Q" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="UPDATE_POSITION">
        <org.eventb.core.refinesEvent name="_nj0w0OF8EfCu9c2s4XMQ6Q" org.eventb.core.target="UPDATE_POSITION"/>
        <org.eventb.core.parameter name="_vOpj8eF7EfCu9c2s4XMQ6Q" org.eventb.core.generated="false" org.eventb.core.identifier="x"/>
        <org.eventb.core.parameter name="_vOpj8uF7EfCu9c2s4XMQ6Q" org.eventb.core.generated="false" org.eventb.core.identifier="y"/>
        <org.eventb.core.guard name="_vOqLAOF7EfCu9c2s4XMQ6Q" org.eventb.core.generated="false" org.eventb.core.label="grd_x" org.eventb.core.predicate="x ∈ ℤ"/>
        <org.eventb.core.guard name="_vOqyEOF7EfCu9c2s4XMQ6Q" org.eventb.core.generated="false" org.eventb.core.label="grd_y" org.eventb.core.predicate="y ∈ ℤ"/>
        <org.eventb.core.action name="_vOsAMOF7EfCu9c2s4XMQ6Q" org.eventb.core.assignment="current_position ≔ x ↦ y" org.eventb.core.generated="false" org.eventb.core.label="act_pos"/>
        <org.eventb.core.action name="_fLoe4OyVEfCPM4v5mgUqKg" org.eventb.core.assignment="visited ≔ {TRUE ↦ visited ∪ {x ↦ y}, FALSE ↦ visited}(bool(x ↦ y ∈ (1‥ WIDTH) × (1‥DEPTH)))" org.eventb.core.generated="false" org.eventb.core.label="act_visited"/>
        <org.eventb.core.action name="_vOtOUOF7EfCu9c2s4XMQ6Q" org.eventb.core.assignment="emergency_mode ≔ bool(x ↦ y ∉ (1‥ WIDTH) × (1‥DEPTH))" org.eventb.core.generated="false" org.eventb.core.label="act_emergency_mode"/>
        <org.eventb.core.guard name="_wuFY8OHUEfC0NdyoK1GV1g" org.eventb.core.generated="false" org.eventb.core.label="grd_emergency_mode" org.eventb.core.predicate="emergency_mode = FALSE"/>
    </org.eventb.core.event>
    <org.eventb.core.invariant name="_PuBPcOyXEfCPM4v5mgUqKg" org.eventb.core.generated="false" org.eventb.core.label="inv_current_pos_in_visited" org.eventb.core.predicate="current_position ∈ (1‥ WIDTH) × (1‥DEPTH) ⇒ current_position ∈ visited"/>
</org.eventb.core.machineFile>
